{"version":3,"sources":["keys.js","canvas.js","hero.js","collision.js","utils.js","life.js","game.js","enemies/index.js","index.js"],"names":["keysMap","UsableKeys","populateKeysMap","includes","event","code","type","canvas","document","getElementById","ctx","getContext","heroDefault","speed","width","height","x","y","hit","opacity","hero","moveHero","Math","max","min","opacityDirection","drawHero","fillStyle","fillRect","resetHero","collision","r","h","xin","yin","random","lifeDefault","collided","life","moveLife","game","lifes","drawLife","generateLife","resetLife","statusBar","lifesCount","gameStatus","stageCount","gameDefault","stage","paused","over","previousGame","drawStatusBar","innerHTML","innerText","reset","gameOver","updateLevel","enemiesCount","enemies","generateEnemies","Array","keys","map","_","hitHero","enemy","setTimeout","moveEnemies","forEach","index","removeEnemyNotShown","drawEnemies","length","splice","resetEnemies","draw","clearRect","update","requestAnimationFrame","start","pause","togglePause","addEventListener","focus","window"],"mappings":"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","file":"src.e31bb0bc.map","sourceRoot":"../src","sourcesContent":["export let keysMap = {}\n\nconst UsableKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Space']\n\nexport const populateKeysMap = () => {\n  if (UsableKeys.includes(event.code)){\n    keysMap[event.code] = event.type == 'keydown'\n  }\n}\n","export const canvas = document.getElementById('board')\nexport const ctx = canvas.getContext(\"2d\")\n","import { canvas, ctx } from './canvas'\nimport { keysMap } from './keys'\n\nconst heroDefault = {\n  speed: 6,\n  width: 30,\n  height: 30,\n  x: canvas.width / 2 - 20,\n  y: canvas.height - 60,\n  hit: false,\n  opacity: 1\n}\n\nexport let hero = { ...heroDefault }\n\nconst moveHero = () => {\n  if (keysMap['ArrowUp']) {\n    hero.y -= hero.speed\n  }\n  if (keysMap['ArrowDown']) {\n    hero.y += hero.speed\n  }\n  if (keysMap['ArrowLeft']) {\n    hero.x -= hero.speed\n  }\n  if (keysMap['ArrowRight']){\n    hero.x += hero.speed\n  }\n  // Wall collision\n  hero.x = Math.max(Math.min(hero.x, canvas.width - hero.width), 0)\n  hero.y = Math.max(Math.min(hero.y, canvas.height - hero.height), 0)\n}\n\nlet opacityDirection = -1\n\nexport const drawHero = () => {\n  moveHero()\n  if (hero.hit) {\n    hero.opacity += opacityDirection * 0.08\n    if (hero.opacity <= 0.2) opacityDirection = 1\n    if (hero.opacity >= 1) opacityDirection = -1\n    ctx.fillStyle = `rgb(223, 147, 80, ${hero.opacity})`\n  } else {\n    hero.opacity = 1\n    ctx.fillStyle = `rgb(0, 0, 0, ${hero.opacity})`\n  }\n  ctx.fillRect(hero.x, hero.y, hero.width, hero.height)\n}\n\nexport const resetHero = () => {\n  hero = { ...heroDefault }\n}\n","export const collision = (r, h) => {\n  const xin = h.x + h.width >= r.x && h.x <= r.x + r.width\n  const yin = h.y + h.height >= r.y && h.y <= r.y + r.height\n\n  return xin && yin\n}\n","export const random = (max, min) =>\n  Math.random() * (max - min) + min\n","import { ctx, canvas } from './canvas'\nimport { hero } from './hero'\nimport { collision } from './collision'\nimport { game } from './game'\nimport { random } from './utils'\n\nexport const lifeDefault = {\n  width: 10,\n  height: 10,\n  collided: false,\n  y: -500,\n  x: 100\n}\n\nexport let life = { ...lifeDefault }\n\nconst moveLife = () => {\n  if (collision(life, hero)) {\n    game.lifes += 1\n    life.y = -100\n    life.collided = true\n  }\n  life.y += life.speed\n}\n\nexport const drawLife = () => {\n  if (!life.collided) {\n    moveLife()\n    ctx.fillStyle = 'rgb(25, 174, 97)'\n    ctx.fillRect(life.x, life.y, life.width, life.height)\n  }\n}\n\nexport const generateLife = () => {\n  if (life.y < 0 || life.y > canvas.height) {\n    life.x = random(10, canvas.width - 20)\n    life.y = random(-200, -800)\n    life.speed = random(1, 3)\n    life.collided = false\n  }\n}\n\nexport const resetLife = () => {\n  life = { ...lifeDefault }\n}\n","import { resetLife, generateLife } from './life'\nimport { resetHero } from './hero'\nimport { resetEnemies, generateEnemies } from './enemies'\n\n\nexport const statusBar = document.getElementById('status-bar')\nconst lifesCount = document.getElementById('lifes')\nconst gameStatus = document.getElementById('game-status')\nconst stageCount = document.getElementById('stage')\n\nexport const gameDefault = {\n  lifes: 1,\n  stage: 0,\n  paused: true,\n  over: false\n}\n\nexport let game = { ...gameDefault }\n\nlet previousGame = {\n  lifes: null,\n  stage: null,\n  paused: null\n}\n\nexport const drawStatusBar = () => {\n  if (game.lifes !== previousGame.lifes) {\n    lifesCount.innerHTML = `♥ ${game.lifes}`\n    previousGame.lifes = game.lifes\n  }\n  if (game.paused !== previousGame.paused) {\n    gameStatus.innerHTML = `${game.paused ? '&#10074;&#10074;' : '▶'}`\n    previousGame.paused = game.paused\n  }\n  if (game.stage !== previousGame.stage) {\n    stageCount.innerText = `Stage ${game.stage}`\n    previousGame.stage = game.stage\n  }\n}\n\nexport const reset = () => {\n  resetHero()\n  resetLife()\n  resetEnemies()\n  game = { ...gameDefault }\n\n}\n\nexport const gameOver = () => {\n  game.paused = true\n  game.over = true\n}\n\nexport const updateLevel = () => {\n  game.stage += 1\n  generateLife()\n  generateEnemies()\n}\n","import { ctx, canvas } from '../canvas'\nimport { hero } from '../hero'\nimport { collision } from '../collision'\nimport { game, updateLevel } from '../game'\nimport { random } from '../utils'\n\nconst enemiesCount = 50\nlet enemies = []\n\nexport const generateEnemies = () => {\n  enemies = [\n    ...enemies,\n    ...[...Array(enemiesCount + game.stage).keys()].map(_ => ({\n      speed: random(0.1, Math.min(1 + game.stage, hero.speed - 1)),\n      width: 30,\n      height: 30,\n      x: random(-20, canvas.width - 20),\n      y: random(-1000, -30)\n    }))\n  ]\n}\n\nconst hitHero = (enemy) => {\n  if (!hero.hit && collision(enemy, hero)) {\n    hero.hit = true\n    game.lifes -= 1\n    setTimeout(() => {\n      hero.hit = false\n    }, 2000)\n  }\n}\n\nconst moveEnemies = () => {\n  enemies.forEach((enemy, index) => {\n    removeEnemyNotShown(enemy, index)\n    hitHero(enemy)\n    enemy.y += enemy.speed\n  })\n}\n\nexport const drawEnemies = () => {\n  if (enemies.length <= 50) updateLevel()\n  moveEnemies()\n  enemies.forEach(enemy => {\n    ctx.fillStyle = `rgb(165, 77, 105)`\n    ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height)\n  })\n}\n\nconst removeEnemyNotShown = (enemy, index) => {\n  if (enemy.y > canvas.height) {\n    enemies.splice(index, 1)\n  }\n}\n\nexport const resetEnemies = () => {\n  enemies = []\n}\n","import { populateKeysMap, keysMap } from './keys'\nimport { canvas, ctx } from './canvas'\nimport { drawEnemies } from './enemies'\nimport { drawLife } from './life'\nimport { drawHero } from './hero'\nimport { drawStatusBar, game, gameOver, reset } from './game'\n\nconst draw = () => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n  drawEnemies()\n  drawLife()\n  drawHero()\n  drawStatusBar()\n}\n\nconst update = () => {\n  setTimeout(() => {\n    if (game.over && keysMap['Space']) reset()\n    draw()\n    if (game.lifes === 0) gameOver()\n    if (!game.paused) requestAnimationFrame(update)\n  }, 1000 / 60)\n}\n\nconst start = () => {\n  game.paused = false\n  update()\n}\n\nconst pause = () => {\n  game.paused = true\n  update()\n}\n\nconst togglePause = () => {\n  game.paused ? start() : pause()\n}\n\ncanvas.addEventListener('click', () => {\n  canvas.focus()\n})\n\ncanvas.addEventListener('focus', () => {\n  start()\n})\n\ncanvas.addEventListener('blur', () => {\n  pause()\n})\n\nwindow.addEventListener('keydown', () => {\n  if (event.code === 'Space') togglePause()\n  populateKeysMap()\n})\n\nwindow.addEventListener('keyup', () => {\n  populateKeysMap()\n})\n"]}